const test1 = `     |          
     |  +--+    
     A  |  C    
 F---|----E|--+ 
     |  |  |  D 
     +B-+  +--+`

const test1Result = 38

const input = `                                                                                                                                                                                       |                 
                                                                                                                                                                                       |                 
     +-------------------------------------------------------------------------------------------------------+                           +-+   +---------------------------------------|-------------+   
     |                                                                                                       |                           | |   |                                       |             |   
     |               +-+   +-------+     +-------------------------------------------------------------------+               +-----------|-----+           +-----+               +---+ |     +-+ +---|-+ 
     |               | |   |       |     |                                                                                   |           | |               |     |               |   | |     | | |   | | 
   +-|-+             | |   |       |     +----------------------------------------------------------------------------------G------------------------------|---------+           |   +-|---------|-+ | | 
   | | |             | |   |       |                                                                                         |           | |               |     |   |           |     |     | | | | | | 
 +-+ | |     +---------------------|-------------------------------------------------+     +---------------------------------|---+       | |               |   +-|---------------|-----|-----+ | | | | | 
 |   | |     |       | |   |       |                                                 |     |                                 |   |       | |               |   | |   |           |     |       | | | | | 
 | +-|-|-----|---------|---|-------|-------------------------+                       |     |                                 |   |   +-----|---------------------+   |           |     |       | | | | | 
 | | | |     |       | |   |       |                         |                       |     |                                 |   |   |   | |               |   |     |           |     |       | | | | | 
 | | | +-----------+ | |   |       |         +-----------------------------+   +-----|-----+                                 |   |   |   | |               |   |     |           |     |       | | | | | 
 | | |       |     | | |   |       |         |               |             |   |     |                                       |   |   |   | |               |   |     |           |     |       | | | | | 
 | | |       | +-----------|-----------------|-------------+ |             |   |     |                                       |   |   +---|-|-----------+   |   |     |           |     |       | | | | | 
 | | |       | |   | | |   |       |         |             | |             |   |     |                                       |   |       | |           |   |   |     |           |     |       | | | | | 
 | | |       | |   +---|---+       | +-----+ |             | |             |   |     +-------------------------------------------|-------|-|-------+   |   |   |     | +---+     |     |   +-----+ | | | 
 | | |       | |     | |           | |     | |             | |             |   |                                             |   |       | |       |   |   |   |     | |   |     |     |   |   |   | | | 
 | | |       | |     | |   +-------+ |   +---|-------------|-|-------------|---+         +---------------------------------------|-------|---------|---|---|---------|-|---------+     |   |   |   | | | 
 | | |       | |     | |   |         |   | | |             | |             |             |                                   |   |       | |       |   |   |   |     | |   |           |   |   |   | | | 
 | | |       | |     | |   |         |   | | |             | |             |             |                                   |   | +-----------------+ |   |   +-----|-|-+ |           |   |   |   | | | 
 | | |       | |     | |   |         |   | | |             | |             |             |                                   |   | |     | |       | | |   |         | | | |           |   |   |   | | | 
 K | | +-------|-----|-----|-----------+ +-+ |             | +-+           |             |                                   |   | |     | |       | | |   |         | | | |           |   |   |   | | | 
   | | |     | |     | |   |         | |     |             |   |           |             |                                   |   | |     | |       | | |   |         | | | |           |   |   |   | | | 
   | | |     | |     | |   |         | |     |             |   |   +-------|---+         +-----------------------------------------|-----|-|-------|-|-----|---------------|---------+ |   |   |   | | | 
   | | |     | |     | |   |         | |     |             |   |   |       |   |                                             |   | |     | |       | | |   |         | | | |         | |   |   |   | | | 
   | | |     | |     | |   |         | +-----+             |   |   |       |   |                                         +-----+ | |     | |       | | |   |         | | | |         | |   |   |   | | | 
   | | |     | |     | |   |         |                     |   |   |       |   |                                         |   | | | |     | |       | | |   |         | | | |         | |   |   |   | | | 
   | | |     | |     | |   |         +-----------------------------|---------------------------------------------------------|---|-|-----|-|---------|-|---|-------------+ |         | |   |   |   | | | 
   | | |     | |     | |   |                               |   |   |       |   |                                         |   | | | |     | |       | | |   |         | |   |         | |   |   |   | | | 
   | | |     | |     | |   |                           +-----------|-------|-----------------------------------------------------|---------|---+   | | |   |     +---|-|---|---------+ |   |   |   | | | 
   | | |     | |     | |   |                           |   |   |   |       |   |                                         |   | | | |     | |   |   | | |   |     |   | |   |           |   |   |   | | | 
   | | |     | |     | |   |                       +-----------|---|-------|---------------+               +-------------|---|-|-|-|-------|---|---|-|-|-------+ |   | |   |           |   |   |   | | | 
   | | |     | |     | |   |                       |   |   |   |   |       |   |           |               |             |   | | | |     | |   |   | | |   |   | |   | |   |           |   |   |   | | | 
   | | |     | |     | |   |                       |   |   |   |   |       |   |           |               |             |   | | | |     | | +-|---------------------|-----|---------------|---|---|-|-+ 
   | | |     | |     | |   |                       |   |   |   |   |       |   |           |               |             |   | | | |     | | | |   | | |   |   | |   | |   |           |   |   |   | |   
   | | |   +---|-------|---|-----------------------|---+   |   |   |       |   |           |           +---------------------------|-----|-----|---+ | |   |   | |   | |   |           |   |   |   | |   
   | | |   | | |     | |   |                       |       |   |   |       |   |           |           |   |             |   | | | |     | | | |     | |   |   | |   | |   |           |   |   |   | |   
 +---|-|---|---|-----|-|---|-----------------------|---+   |   +-------------------------------------------|-----------------|---|---------|-|-|-----|-|---------|-----|-----+         |   |   |   | |   
 | | | |   | | |     | |   |                       |   |   |       |       |   |           |           |   |             |   | | | |     | | | |     | |   |   | |   | |   | |         |   |   |   | |   
 | | | |   | | |     | |   |                       |   |   |       |       |   |           |           |   |   +---------|---|-----------+ | | |     | |   |   | |   | |   | |         |   |   |   | |   
 | | | |   | | |     | |   |                       |   |   |       |       |   |           |           |   |   |         |   | | | |       | | |     | |   |   | |   | |   | |         |   |   |   | |   
 | | | |   | | |     | |   |                       |   |   |       |       |   |           |           |   +-------------|---|-|-------------|---------|---|-----|---+ |   | |         |   |   |   | |   
 | | | |   | | |     | |   |                       |   |   |       |       |   |           |           |       |         |   | | | |       | | |     | |   |   | |     |   | |         |   |   |   | |   
 | | | |   | | +-----|-----|-----------------------|---------------|-------|---------------------------|-------+         |   | | | |       | | |     | |   |   | |     |   | |         |   |   |   | |   
 | | | |   | |       | |   |                       |   |   |       |       |   |           |           |                 |   | | | |       | | |     | |   |   | |     |   | |         |   |   |   | |   
 +-|-+ |   | |       | |   |         +-+           |   |   |       |       |   |           |           |                 |   | | | |       | | |     | |   |   | |     |   | |         |   |   |   | |   
   |   |   | |       | |   |         | |           |   |   |       |       |   |           |           |                 |   | | | |       | | |     | |   |   | |     |   | |         |   |   |   | |   
   |   | +-|---------|-|---|---------|---------------------|-----------------+ |           |           |                 |   | | | |       | | |     | | +-----|-|-----|---|-|-+       |   |   |   | |   
   |   | | | |       | |   |         | |           |   |   |       |       | | |           |           |                 |   | | | |       | | |     | | | |   | |     |   | | |       |   |   |   | |   
   |   | | | |       | |   |         | |           |   |   |       |       | | |           |           |                 |   | | | |       | | |     | | | |   | |     |   | | |       |   |   |   | |   
   |   | | | |       | |   |         | |           |   |   |       |       | | |           |           |                 |   | | | |       | | |     | | | |   | |     |   | | |       |   |   |   | |   
 +-+   | | | |       | | +-----------|-|-----+     |   |   |       |       | +-|-----+     | +-------------------------------|---|-|-------+ | |     | | | |   | |     |   | | |       |   |   |   | |   
 |     | | | |       | | | |         | |     |     |   |   |       |       |   |     |     | |         |                 |   | | | |         | |     | | | |   | |     |   | | |       |   |   |   | |   
 |     | | | |       | | | |         | |     |     |   +---|-------|-------|-+ |     |     | |         |                 |   | | | |         | |     | | | |   | |     |   | | | +-----|---+   |   | |   
 |     | | | |       | | | |         | |     |     |       |       |       | | |     |     | |         |                 |   | | | |         | |     | | | |   | |     |   | | | |     |       |   | |   
 | +-----|---|-------|-|---|---------|-|-----------|-------|-------------------|-------------|---------|-----+ +---------------|---|-----------|-----|-|-|-------------|-----|---------------+ |   | |   
 | |   | | | |       | | | |         | |     |     |       |       |       | | |     |     | |         |     | |         |   | | | |         | |     | | | |   | |     |   | | | |     |     | |   | |   
 | |   | | | |       | | | |         | |     |     |       |       |       | +-------|-----|-|---------|-----|-|---------------|-|-|---------|---------|-|-|-----------|-------+ |     |     | |   | |   
 | |   | | | |       | | | |         | |     |     |       |       |       |   |     |     | |         |     | |         |   | | | |         | |     | | | |   | |     |   | |   |     |     | |   | |   
 | |   | | | |       | | | |         | |     |     |       |       |       |   |     |     | |         |     | |         |   | | | |         | |     | | | |   | |     |   | |   |     |     | |   | |   
 | |   | | | |       | | | |         | |     |     |       |       |       |   |     |     | |         |     | |         |   | | | |         | |     | | | |   | |     |   | |   |     |     | |   | |   
 | |   | | | |       | | | |         | |     |     |       |       |       | +-|-------------|-----------------|---------|---|-|-|-|---------------------|-|-----|---------------|-----------|-----|-+   
 | |   | | | |       | | | |         | |     |     |       |       |       | | |     |     | |         |     | |         |   | | | |         | |     | | | |   | |     |   | |   |     |     | |   |     
 | |   | | | |       | | | |         | |     |     |       |       |       +---------|-----|---+       |     | |         |   | | | |         | |     | +-|-|---|-----------|-|---|-------------+   |     
 | |   | | | |       | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |         | |     |   | |   | |     |   | |   |     |     |     |     
 | |   | | | |       | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |         | |     |   | |   | |     |   | |   |     |     |     |     
 | |   | | | |       | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |         | |     |   | |   | |     |   | |   |     |     |     |     
 | |   | | | |       | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |         | |     |   | |   | |     |   | |   |     |     |     |     
 | |   T | | |       | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |         | |     |   | |   | |     |   | |   |     |     |     |     
 | |   | | | |   +---------|---------|-------------|-------|-------|---------|-|-----|-----|-|-|---------------|---------|-----|-|-|---+     | |     |   | |   | |     |   | |   |     |     |     |     
 | |   | | | |   |   | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |   |     | |     |   | |   | |     |   | |   |     |     |     |     
 | |   | | | |   |   | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |   |     | |     |   | | +-|-|-----|-----|---------|-+   |     |     
 | |   | | | |   |   | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |   |     | |     |   | | | | |     |   | |   |     | |   |     |     
 | |   | | | |   |   | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |   |     | |     |   | | | | |     |   | |   |     | |   |     |     
 | |   | | | |   |   | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | |   |     | |     |   | | | | |     |   | |   |     | |   |     |     
 | | +---+ +-----|---|-|-|---------------------------------|-------|-----------|-----|-------|---------------|-|---------|---|-------+ |     | |     |   | | | | |     |   | |   |     | |   |     |     
 | | | |     |   |   | | | |         | |     |     |       |       |         | |     |     | | |       |     | |         |   | | | | | |     | |     |   | | | | |     |   | |   |     | |   |     |     
 | | | |     |   +-----|---+         | |     |     |       |     +-----------|-------|-----|-|-|-------------------------------|---|---|-----------------|-|-|---|---------|-|---|-------|---|---------+ 
 | | | |     |       | | |           | |     |     |       |     | |         | |     |     | | |       |     | |         |   | | | | | |     | |     |   | | | | |     |   | |   |     | |   |     |   | 
 | | | |     |       | | +-------------|-----|-------------------+ |         | |     | +-----+ |     +-----------------------|-|-------|-----|-|-----------|-----+     |   | |   | +-----|---|-------+ | 
 | | | |     |       | |             | |     |     |       |       |         | |     | |   |   |     | |     | |         |   | | | | | |     | |     |   | | | |       |   | |   | |   | |   |     | | | 
 | | | |     |       | |             | |     |     |       |       |         | |     | |   |   |     | |     | |       +-|---|-|---------------|-----|---|-----|-------------|-----|-----|---|---+ | | | 
 | | | |     |       | |             | |     |     |       |       |         | |     | |   |   |     | |     | |       | |   | | | | | |     | |     |   | | | |       |   | |   | |   | |   |   | | | | 
 | | | |     |       | |         +---|-------------|---------------|---------|-------------|---|-----------------------+ |   +-----|-|-|-------------|-----|---|-----------|-------|---+ |   |   | +-+ | 
 | | | |     |       | |         |   | |     |     |       |       |         | |     | |   |   |     | |     | |         |     | | | | |     | |     |   | | | |       |   | A   | |     |   |   |     | 
 | | | |     |     +-|-----------|-----------|-----|---------------------------------------|---|-+   | |     | |         |     | | | | |     | +---------|---|---------|---|-|-----+     |   |   |     | 
 | | | |     |     | | |         |   | |     |     |       |       |         | |     | |   |   | |   | |     | |         |     | | | | |     |       |   | | | |       |   | |   |       |   |   |     | 
 | | | | +---------|-|-|---------|-+ | |     |     |       | +-----|---------|-------------|---------|-|---------+       |     | | | | |     |       | +---|---|-------|-----|-+ | +-----|-----+ |     | 
 | | | | |   |     | | |         | | | |     |     |       | |     |         | |     | |   |   | |   | |     | | |       |     | | | | |     |       | | | | | |       |   | | | | |     |   | | |     | 
 | | +-|-|---|---------|---------|-----|-----|-----|-------|-|-----|-----------------|-+ +-----|-----|-------|---|-------------|-------+     |       | | | | | |       |   | | | | |     |   | | |     | 
 | |   | |   |     | | |         | | | |     |     |       | |     |         | |     |   | |   | |   | |     | | |       |     | | | |       |       | | | | | |       |   | | | | |     |   | | |     | 
 | |   | |   |     | | |         | | | |     |     |     +-------------------|-|-----|---|-----------|-|-----|---|---------------|-|---+     |       | | | | | |   +---|---|-----|-------|---+ | |     | 
 | |   | |   |     | | |         | | | |     |     |     | | |     |         | |     |   | |   | |   | |     | | |       |     | | | | |     |       | | | | | |   |   |   | | | | |     |     | |     | 
 +-|-+ | | +-------|-|---------------|-|-----------------|-|-------|-+       | |     | +-------|-|---|-|---+ | | |       |     | | | | |     |       | | | +-|-----|-+ |   | | | | |     |     | |     | 
   | | | | | |     | | |         | | | |     |     |     | | |     | |       | |     | | | |   | |   | |   | | | |       |     | | | | |     |       | | |   | |   | | |   | | | | |     |     | |     | 
   | | | | +---------|-|-----------|---------|-----------|---|-+   | |       | |     | +-|-|--E|-|-------------------------------|-----|-----------------|---|-----|-|---------|-----------+   | |     | 
   | | | |   |     | | |         | | | |     |     |     | | | |   | |       | |     |   | |   | |   | |   | | | |       |     | | | | |     |       | | |   | |   | | |   | | | | |     | |   | |     | 
   | | | |   |     | | |         | | | |     |     |   +---|-------|-|-----------------+ | |   | |   | |   | | | |       |     | | | | |     |       | | |   | |   | | |   | | | | |     | |   | |     | 
   | | | |   |     | | |         | | | |     |     |   | | | | |   | |       | |     | | | |   | |   | |   | | | |       |     | | | | |     |       | | |   | |   | | |   | | | | |     | |   | |     | 
   | | | |   |     | | |         | | | |     |     +---|-----|-----|-|-------|---------|-|-|-----|---|-----|-------------------|-|---|-|-------------+ | |   | |   | | |   | | | | |     | |   | |     | 
   | | | |   |     | | |         | | | |     |         | | | | |   | |       | |     | | | |   | |   | |   | | | |       |     | | | | |     |         | |   | |   | | |   | | | | |     | |   | |     | 
   | | | |   |     | | |         | | | |     |         | | | | |   | |       | |     | | | |   | |   | |   | | | |       |     | | | | |     | +---------|---------------------|-----------|-+ | |     | 
   | | | |   |     | | |         | | | |     |         | | | | |   | |       | |     | | | |   | |   | |   | | | |       |     | | | | |     | |       | |   | |   | | |   | | | | |     | | | | |     | 
 +---|-------+     | | |         | | | | +-------------|-----|-|---|---------|-|---------|-----|-----|-|-------|-|-------|-----|-|---|-------|---------------|-|---+ | |   | | | | |     | | +---+     | 
 | | | | |         | | |         | | | | |   |         | | | | |   | |       | |     | | | |   | |   | |   | | | |       |     | | | | |     | |       | |   | |     | |   | | | | |     | |   |       | 
 | | | | | +-------|-|-|---------|-+ | | |   |         | | | | +---------------|-------|------Y--|---|-|---|-----|-------|-----|-|-----|-------|-----+ | |   | |     | |   | | | | |     | |   |       | 
 | | | | | |       | | |         |   | | |   |         | | | |     | |       | |     | | | |   | |   | |   | | | |       |     | | | | |     | |     | | |   | |     | |   | | | | |     | |   |       | 
 | | | | | |       | | |         | +-----|---|---------|-|---------|-|---------|-----|-+ | |   | |   | |   | | | |       |     | | | | |     | |     | | |   | |     | |   | | | | |     | |   |       | 
 | | | | | |       | | |         | | | | |   |         | | | |     | |       | |     |   | |   | |   | |   | | | |       |     | | | | |     | |     | | |   | |     | |   | | | | |     | |   |       | 
 | | +---------------|-------------|---|---------------|-|---------|-|-------|-------------|---|-|-----------|---|-------------|---|---------|---------|-----|-|-------|-----------------------+   +-+ | 
 | |   | | |       | | |         | | | | |   |         | | | |     | |       | |     |   | |   | |   | |   | | | |       |     | | | | |     | |     | | |   | |     | |   | | | | |     | |       | | | 
 | |   | | |       | | | +-------|-|-|-|-|---|-----------|---|-+   | |       | |     |   | |   | |   | |   | | | |       +-----|-|---|---------------|-|-------------|-|-------|-|-|-----------+   | | | 
 | |   | | |       | | | |       | | | | |   |         | | | | |   | |       | |     |   | |   | |   | |   | | | |             | | | | |     | |     | | |   | |     | |   | | | | |     | |   |   | | | 
 | | +---+ |       | | | |       | | | | |   |         | | | | |   | |       | |     |   | |   | |   | |   | | | |             | | | | |     | |     | | |   | |     | |   | | | | |   +-|-|---+   | | | 
 | | | |   |       | | | |       | | | | |   |         | | | | |   | |       | |     |   | |   | |   | |   | | | |             | | | | |     | |     | | |   | |     | |   | | | | |   | | |       | | | 
 | | | |   |       | | | |       | | | | | +-------------|-|---|---|---------|-|-----|---|-----|-|---|-----|-|-|-|-----------------------------+     | | |   | |     | |   | | | | |   | | |       | | | 
 | | | |   |       | | | |       | | | | | | |         | | | | |   | |       | |     |   | |   | |   | |   | | | |             | | | | |     |       | | |   | |     | |   | | | | |   | | |       | | | 
 | | | |   |       | | | |       | | | | | | |         | | | | |   | |       | |     |   | |   | |   | |   | | | |             | | | | |     |       | | |   | |     | |   | | | | |   | | |       | | | 
 | | | |   |       | | | |       | | | | | | |         | | | | |   | |       | |     |   | |   | |   | |   | | | |             | | | | |     |       | | |   | |     | |   | | | | |   | | |       | | | 
 | | | |   |       | | | |       | | | | | | |         | | | | |   | |       +---------------------------------------------------|-----|-----|-------|---------|---+ | |   | | | | |   | | |       | | | 
 | | | |   |       | | | |       | | | | | | |         | | | | |   | |         |     |   | |   | |   | |   | | | |             | | | | |     |       | | |   | |   | | |   | | | | |   | | |       | | | 
 | | | |   |       | | | |       | | | | | | |         | | | | |   | |         |     |   | |   | |   | |   | | | |             | | | | |     |       | | |   | |   | | |   | | | | |   | | |       | | | 
 | | | |   |       | | | |       | | | | | | |         | | | | |   | |         |     |   | |   | |   | |   | | | |             | | | | |     |       | | |   | |   | | |   | | | | |   | | |       | | | 
 | | | | +-+   +---------|-------|-|-|---|-|-----------------------------------------|---|-------|---------+ | | |             | | | | |     |       | | |   | |   | | |   | | | | |   | | |       | | | 
 | | | | |     |   | | | |       | | | | | | |         | | | | |   | |         |     |   | |   | |   | |     | | |             | | | | |     |       | | |   | |   | | |   | | | | |   | | |       | | | 
 | | | | |     | +-|-|---------------|---|-------------|-|-|-|-|---|-----------|-----|-----|---|-----|-----------|-----------+ | | | | |     |       | | |   | |   | +-----|-|-|-|-|---+ | |       | | | 
 | | | | |     | | | | | |       | | | | | | |         | | | | |   | |         |     |   | |   | |   | |     | | |           | | | | | |     |       | | |   | |   |   |   | | | | |     | |       | | | 
 | | | | |     | | | | | |       | | | | | | |         | | | | |   | |         |     |   | |   | |   | |     | | |           | | | | | |     |       | | |   | |   |   |   | | | | |     | |       | | | 
 | | | | |     | | | | | |       | | | | | | |         | | | | |   | |         |     |   | |   | |   | |     | | |           | | | | | |     |       | | |   | |   |   |   | | | | |     | |       | | | 
 | | | | |     | | | | | |       | | | | | | |       +-----|-------|-|-----------+   |   | |   | |   +-|-----|-|-------------|---|---|-------|-------|---|---|-|-+ |   |   | | | | |     | |       | | | 
 | | | | |     | | | | | |       | | | | | | |       | M | | | |   | |         | |   |   | |   | |     |     | | |           | | | | | |     |       | | |   | | | |   |   | | | | |     | |       | | | 
 | | | | |   +-----|-|---|-------|---|-----------+   | | | | | |   | |         | |   |   | |   | |     |     | | |           | | | | | |     |       | | |   | | | |   |   | | | | |     | |       | | | 
 | | | | |   | | | | | | |       | | | | | | |   |   | | | | | |   | |         | |   |   | |   | |     |     | | |           | | | | | |     |       | | |   | | | |   |   | | | | |     | |       | | | 
 | | | | |   | | +-|-|---|-------+ | | | | | |   |   | | | | | +---------------|-------+ | |   | |     |     +---|-----------|-|-|-|---------|-------|---|-------|-----------|-+ | |     | |       | | | 
 | | | | |   | |   | | | |         | | | | | |   |   | | | | |     | |         | |   | | | |   | |     |       | |           | | | | | |     |       | | |   | | | |   |   | |   | |     | |       | | | 
 | | | | |   | |   | | | |         | | | | | |   |   | | | | |     | |         | |   | +---|-----|-----|---------------------|-------|-------|-------|-+ |   | | | |   |   | |   | |     | |       | | | 
 | | | | |   | |   | | | |         | | | | | |   |   | | | | |     | |         | |   |   | |   | |     |       | |           | | | | | |     |       |   |   | | | |   |   | |   | |     | |       | | | 
 | | | +-------|-----|-------------|-------|-----|-----|-|-|-|-------|---------|-----|---------------------+   | |           | | | | | |     |       |   |   | | | |   |   | |   | |     | |       | | | 
 | | |   |   | |   | | | |         | | | | | |   |   | | | | |     | |         | |   |   | |   | |     |   |   | |           | | | | | |     |       |   |   | | | |   |   | |   | |     | |       | | | 
 | | |   |   | |   | | | |         | | | | | |   |   +-+ +-----+   | |     +-----+   | +---------------------------------------|-|---|-------------------|-+ | | | |   |   | |   | |     | |       | | | 
 | | |   |   | |   | | | |         | | | | | |   |         | | |   | |     |   |     | | | |   | |     |   |   | |           | | | | | |     |       |   | | | | | |   |   | |   | |     | |       | | | 
 | | |   |   | |   | | | |   +-----|-|-------+   |         | | |   | |     |   |     | | | |   | |     |   |   | |           +---|---|-|-----|-------------------------------|-+ | |     | |       | | | 
 | | |   |   | |   | | | |   |     | | | | |     |         | | |   | |     |   |     | | | |   | |     |   |   | |             | | | | |     |       |   | | | | | |   |   | | | | |     | |       | | | 
 | | |   |   | |   | | | |   |   +---|-----------+         | | |   | |     |   |     | | | |   | |     |   |   | |             +-|-|-|-|-----|-----+ |   | | | | | |   |   | | | | |     | |       | | | 
 | | |   |   | |   | | | |   |   | | | | | |               | | |   | |     |   |     | | | |   | |     |   |   | |               | | | |     |     | |   | | | | | |   |   | | | | |     | |       | | | 
 | | |   |   | |   | | +-----|---------|-|-|-------------------|---|-|-----|---------|-|-|-|-------------------|---------------------|-----+ |     +-|---|-+ | | | |   | +-|-------|-----------------+ | 
 | | |   |   | |   | |   |   |   | | | | | |               | | |   | |     |   |     | | | |   | |     |   |   | |               | | | |   | |       |   |   | | | |   | | | | | | |     | |       |   | 
 | | |   |   | |   | |   |   |   | | | | | |               | | |   | |     |   |     | | | +---+ |     |   |   | |               | | | |   | |       |   |   | | +-|---|-+ | | | | |     | |       |   | 
 | | |   |   | |   | |   |   |   | | | | | |               | | |   | |     |   |     | | |       |     |   |   | |               | | | |   | |       |   |   | |   |   |   | | | | |     | |       |   | 
 | | |   |   | |   | |   |   |   | | | | | |               | +-----|-|---------|-----+ | |       |     |   |   | |         +-+   | | | |   | |       |   |   | |   |   | +-----|-|-------|-------+ |   | 
 | | |   |   | |   | |   |   |   | | | | | |               |   |   | |     |   |       | |       |     |   |   | |         | |   | | | |   | |       |   |   | |   |   | | | | | | |     | |     | |   | 
 | | |   |   | |   | |   |   +-----|-|-|---|---------------|---|-----|---------------------------------|---|---|-----------|-|---|-|-|-|---|-|-------|-------|-----|-----|-|-|---+ |     | |     | |   | 
 | | |   |   | |   | |   |       | | | | | |               |   |   | |     |   |       | |       |     |   |   | |         | |   | | | |   | |       |   |   | |   |   | | | | |   |     | |     | |   | 
 | | |   |   | |   | |   |       | | | | | |           +-----------|-------|---|-------|---------|-----|---|-----------------|---|---------------------------|---------|-|---|-|-+ |     | |     | |   | 
 | | |   |   | |   | |   |       | | | | | |           |   |   |   | |     |   |       | |       |     |   |   | |         | |   | | | |   | |       |   |   | |   |   | | | | | | |     | |     | |   | 
 +-----------|-------|---|-------|-----|-|-|---------------|-------|-------|---+       | |       |     |   |   | |         | |   | | | |   | |     +-|-+ |   | |   |   | | | | | | |     | |     | |   | 
   | |   |   | |   | |   |       | | | | | |           |   |   |   | |     |           | |       |     |   |   | |         | |   | | | |   | |     | | | |   | |   |   | | | | | | |     | |     | |   | 
 +-|-+   |   | |   | |   |       | | | | | |           |   |   |   | |     |           | |       |     |   |   +-----------|-----|---------|-|-------|-|-----|-----|---|-|---+ | | |     | |     | |   | 
 | |     |   | |   | |   |       | | | | | |           |   |   |   | |     |           | |       |     |   |     |         | |   | | | |   | |     | | | |   | |   |   | | |   | | |     | |     | |   | 
 | |     +---------+ |   |       | | | | | |           |   |   |   | |     |           | |       |     |   |     |         | |   | | | |   | |     | | | +---|-----------|---------|-+   | |     | | +-+ 
 | |         | |     |   |       | | | | | |           |   |   |   | |     |           | |       |     |   |     |         | |   | | | |   | |     | | |     | |   |   | | |   | | | |   | |     | | |   
 | |         | |     |   |       +-|---|-|---------+   |   |   |   | |     |           | |       |     |   |     |         | |   | | | |   | |     | | |     | |   |   | | |   | | | |   | |     | | |   
 | |         | |     |   |         | | | | |       |   |   |   |   | |     |           | |       |     |   |     |         | |   | | | |   | |     | | |     | |   |   | | |   | | | |   | |     | | |   
 | |       +---------|---+         | | | | |       |   |   |   |   | |     |           | |       |     |   |   +-----------|-|-------|-|---+ |     | | |     | |   |   | | |   | | | |   | |     | | |   
 | |       | | |     |             | | | | |       |   |   |   |   | |     |           | |       |     |   |   | |         | |   | | | |     |     | | |     | |   |   | | |   | | | |   | |     | | |   
 | +-------|-|-|---+ |   +-+       | | | | |       |   |   |   |   | |     |     +-----|-|-------|-----|---+   | |         | |   | | | |     |     | | |     | +---+   | +-----|-|-+ |   | |     | | |   
 |         | | |   | |   | |       | | | | |       |   |   |   |   | |     |     |     | |       |     |       | |         | |   | | | |     |     | | |     |         |   |   | |   |   | |     | | |   
 |         | | |   | |   | |       | | | | |       |   |   |   |   | |     |     |     | |       |     |       +-------------|-----|-|-|-----------|-|-|---+ |         |   +-+ | | +-+   | |     | | |   
 |         | | |   | |   | |       | | | | |       |   |   |   |   | |     |     |     | |       |     |         |         | |   | | | |     |     | | |   | |         |     | | | |     | |     | | |   
 |         +-----+ +---------------|-|---|-|---------------|-----+ | |     | +-----------|---+   |     |       +-+         | |   | | | |     |     | | |   | |         |     | | | | +-----+     | | |   
 |           | | |   |   | |       | | | | |       |   |   |   | | | |     | |   |     | |   |   |     |       |           | |   | | W |     |     | | |   | |         |     | | | | |   |       | | |   
 |         +-----|---|---|-|---------------|-----------|-+ |   | | | |     | |   |     | |   +---------|-------+           | +---+ | | |     |     | | | +-|---------------------+ | |   |       | | |   
 |         | | | |   |   | |       | | | | |       |   | | |   | | | |     | |   |     | |       |     |                   |       | | |     |     | | | | | |         |     | |   | |   |       | | |   
 |         | +---+   |   | |       | +-|-|---------|---|---------|---------------|---------------|-----+           +-------|-------|-+ |     |     | | | | | |         |     | |   | |   |       | | |   
 |         |   |     |   | |       |   | | |       |   | | |   | | | |     | |   |     | |       |                 |       |       |   |     |     | | | | | |         |     | |   | |   P       | | |   
 +---------|---|-----|-----|-------------|-|---------------|-----|-|-|-----------------------+   |     +-+   +-----|-------|-------|-+ |     |     | | | | | |         |     | |   | |   |       | | |   
           |   |     |   | |       |   | | |       |   | | |   | | | |     | |   |     | |   |   |     | |   |     |       |       | | |     |     | | | | | |         |     | |   | |   |       | | |   
 +-------------------|-------------|---------------------|-------|---|-----|-|---------|---------|-------|---|-----+       |       | | |     |     | | +-+ | |         |     +-|---------+       | | |   
 |         |   |     |   | |       |   | | |       |   | | |   | | | |     | |   |     | |   |   |     | |   |             |       | | |     |     | |     | |         |       |   | |           | | |   
 |   +---+ +-+ |     |   | |       | +-|-|---------|---|-+ |   | | | |     | |   |     | |   |   |     +-----------+       |       | | |     |     | |     | |         |       |   | |           | | |   
 |   |   |   | |     |   | |       | | | | |       |   |   |   | | | |     | |   |     | |   |   |       |   |     |       |       | | |     |     | |     | |         |       |   | |           | | |   
 | +-|---|-----|-----|---+ |       | +-------------|---|-----------|---------|---------------|-+ |       |   | +-+ +-----+ |       | | |     |     +-+     | |         |   +---+   | |           | | |   
 | | |   |   | |     |     |       |   | | |       |   |   |   | | | |     | |   |     | |   | | |       |   | | |       | |       | | |     |             | |         |   |       | |           | | |   
 | | |   |   +-|-------------------------|-|-----------|---+   | | | |     | |   |     +-|--L--|-|---+ +---+ | | +-+     | |       | | |     +-----------+ | |         |   |       | |           | | |   
 | | |   |     |     |     |       |   | | |       |   |       | | | |     | |   |       |   | | |   | | | | | |   |     | |       | | |                 | | |         |   |       | |           | | |   
 | | |   |     |     +-----|-------------|-|-------|---------------|-|-----|-------------------------------|-------------|-|-------------------------------|-----------------+     | |           | | |   
 | | |   |     |           |       |   | | |       |   |       | | | |     | |   |       |   | | |   | | | | | |   |     | |       | | |                 | | |         |   | |     | |           | | |   
 | | +---------|-----------|-------|-----|-|-------|---|---------|---|-----+ |   |       | +-|-|-|---|---|-|-|-----|-----+ |       | | |                 | | |         |   +-|-----------------+ | | |   
 | |     |     |           |       |   | | |       |   |       | | | |       |   |       | | | | |   | | | | | |   |       |       | | |                 | | |         |     |     | |         | | | |   
 | | +---------+           |       +-------------------|-------+ | | |       |   |       | | | | |   | | | | | |   |       |       | | |                 | | +---------------+     | |         +---|---+ 
 | | |   |                 |           | | |       |   |         | | |       |   |       | | | | |   | | | | | |   |       |       | | |                 | |           |           | |           | | | | 
 | +-|---+ +---------------|---------------|-------|-------------------------|-----------------+ +---|---|---+ |   |       |     +-----------+           | +-----+     |           +-------------|-|-+ | 
 |   |     |               |           | | |       |   |         | | |       |   |       | | |       | | | |   |   |       |     | | | |     |           |       |     |             |           | |   | 
 | +-+     +---------------+           | +---------+   |         | | |       |   |       | | |       | | | | +-|---|-------|-+   | | | |   +-|-------------------|-----|-------------------------|-----+ 
 | |                                   |   |           |         | | |       |   |       | | |       | | | | | |   |       | |   | | | |   | |           |       |     |             |           | |     
 | |                                   |   |           +---------+ +-|-------|---------------|-------|---|-|-|---------------|---|-----|---|-|-----------|-----------------+         |           | +---+ 
 | |                                   |   |                         |       |   |       | | |       | | | | | |   |       | |   | | | |   | |           |       |     |   |         |           |     | 
 +-|---------------------------------------|---------------------+   |       +---+       +-+ +-----+ | | | | | |   +-------------|-|---+   +-+           +-------|-----|-------------+           +-----+ 
   |                                   |   |                     |   |                             | | | | | | |           | |   | | |                           |     |   |                             
   +-----------------------------------+   +---------------------+   +-----------------------------+ +-+ +-+ +-+           +-+   +-+ +---------------------------+     +---+                             
                                                                                                                                                                                                         `

const DIRECTIONS = {
  up: 1,
  right: 2,
  down: 3,
  left: 4,
  switch: 5
}
const day19 = val => {
  let grid = []
  let hitLetters = ''
  let totalSteps = 0
  let currentLocation = []
  let currentDirection = DIRECTIONS.down
  let done = false
  let lastDirection

  val.split('\n').forEach((row, rowIndex) => {
    grid.push([])
    row.split('').forEach((col, colIndex) => {
      grid[rowIndex].push(col)
      if (rowIndex === 0 && col !== ' ') {
        currentLocation = [rowIndex, colIndex]
      }
    })
  })

  const stepInDirection = () => {
    while (currentDirection !== DIRECTIONS.switch && !done) {
      switch (currentDirection) {
        case DIRECTIONS.up:
          currentLocation = [currentLocation[0] - 1, currentLocation[1]]
          totalSteps++
          break
        case DIRECTIONS.right:
          currentLocation = [currentLocation[0], currentLocation[1] + 1]
          totalSteps++
          break
        case DIRECTIONS.down:
          currentLocation = [currentLocation[0] + 1, currentLocation[1]]
          totalSteps++
          break
        case DIRECTIONS.left:
          currentLocation = [currentLocation[0], currentLocation[1] - 1]
          totalSteps++
          break
        default:
          break
      }
      switch (grid[currentLocation[0]][currentLocation[1]]) {
        case '+':
          lastDirection = currentDirection
          currentDirection = DIRECTIONS.switch
          break
        case '-':
        case '|':
          break
        case ' ':
          done = true
          break
        default:
          hitLetters += grid[currentLocation[0]][currentLocation[1]]
          break
      }
    }

    if (currentDirection === DIRECTIONS.switch) {
      if (
        lastDirection !== DIRECTIONS.left &&
        lastDirection !== DIRECTIONS.right
      ) {
        if (
          grid[currentLocation[0]][currentLocation[1] + 1] &&
          grid[currentLocation[0]][currentLocation[1] + 1] !== ' ' &&
          grid[currentLocation[0]][currentLocation[1] + 1] !== '|'
        ) {
          currentDirection = DIRECTIONS.right
        } else {
          currentDirection = DIRECTIONS.left
        }
      } else {
        if (
          grid[currentLocation[0] + 1] &&
          grid[currentLocation[0] + 1][currentLocation[1]] !== ' ' &&
          grid[currentLocation[0] + 1][currentLocation[1]] !== '-'
        ) {
          currentDirection = DIRECTIONS.down
        } else {
          currentDirection = DIRECTIONS.up
        }
      }
    }
  }

  do {
    stepInDirection()
  } while (!done)

  return totalSteps
}

if (day19(test1) == test1Result) console.log('test1 pass')

const retVal = day19(input)
console.log(retVal)
